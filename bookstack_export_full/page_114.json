{
  "id": 114,
  "title": "Bookstack Graphiti system configuration guide",
  "slug": "bookstack-graphiti-system-configuration-guide",
  "url": "https://knowledge.oculair.ca/page/114",
  "updated_at": "2025-08-08T01:59:11.000000Z",
  "body_html": "<h1 id=\"bkmrk-installation-and-con\">Installation and Configuration Guide</h1>\n<h2 id=\"bkmrk-prerequisites\">Prerequisites</h2>\n<p id=\"bkmrk-before-installing-th\">Before installing the BookStack-Graphiti integration, ensure you have the following prerequisites:</p>\n<ul id=\"bkmrk-python-3.8-or-higher\">\n<li>Python 3.8 or higher</li>\n<li>Access to a running Graphiti instance</li>\n<li>Access to a BookStack instance with administrative privileges</li>\n<li>API access enabled in your BookStack instance</li>\n</ul>\n<h2 id=\"bkmrk-environment-setup\">Environment Setup</h2>\n<h3 id=\"bkmrk-1.-clone-the-reposit\">1. Clone the Repository</h3>\n<pre id=\"bkmrk-git-clone-%3Crepositor\"><code class=\"language-bash\">git clone &lt;repository-url&gt;\ncd bookstack-graphiti-integration\n</code></pre>\n<h3 id=\"bkmrk-2.-create-a-virtual-\">2. Create a Virtual Environment (Recommended)</h3>\n<pre id=\"bkmrk-python--m-venv-venv-\"><code class=\"language-bash\">python -m venv venv\nsource venv/bin/activate  # On Windows use `venv\\Scripts\\activate`\n</code></pre>\n<h3 id=\"bkmrk-3.-install-dependenc\">3. Install Dependencies</h3>\n<pre id=\"bkmrk-pip-install--r-requi\"><code class=\"language-bash\">pip install -r requirements.txt\n</code></pre>\n<p id=\"bkmrk-the-key-dependencies\">The key dependencies include:</p>\n<ul id=\"bkmrk-fastapi%3A-web-framewo\">\n<li><code>fastapi</code>: Web framework for the webhook receiver</li>\n<li><code>uvicorn</code>: ASGI server to run FastAPI</li>\n<li><code>python-dotenv</code>: For managing environment variables</li>\n<li><code>graphiti-core</code>: For interacting with Graphiti</li>\n<li><code>aiohttp</code>: For making asynchronous HTTP requests</li>\n<li><code>requests</code>: For making synchronous HTTP requests</li>\n</ul>\n<h2 id=\"bkmrk-configuration\">Configuration</h2>\n<h3 id=\"bkmrk-environment-variable\">Environment Variables</h3>\n<p id=\"bkmrk-create-a-.env-file-i\">Create a <code>.env</code> file in the project root directory with the following variables:</p>\n<pre id=\"bkmrk-%23-bookstack-configur\"><code class=\"language-dotenv\"># BookStack Configuration\nBS_URL=https://your-bookstack-instance.com\nBS_TOKEN_ID=your_bookstack_token_id\nBS_TOKEN_SECRET=your_bookstack_token_secret\n\n# Graphiti/Neo4j Configuration\nNEO4J_URI=bolt://your-neo4j-instance:7687\nNEO4J_USER=neo4j\nNEO4J_PASSWORD=your_password\nOPENAI_API_KEY=your_openai_api_key\nGRAPHITI_ENDPOINT=http://your-graphiti-instance:8002/api\n\n# Webhook Receiver Configuration\nPORT=8003\nENABLE_SYNC=true\n</code></pre>\n<h3 id=\"bkmrk-configuration-detail\">Configuration Details</h3>\n<h4 id=\"bkmrk-bookstack-settings\">BookStack Settings</h4>\n<ul id=\"bkmrk-bs_url%3A-the-url-of-y\">\n<li><strong>BS_URL</strong>: The URL of your BookStack instance (e.g., <code>https://bookstack.example.com</code>)</li>\n<li><strong>BS_TOKEN_ID</strong>: Your BookStack API token ID (generated in the BookStack admin panel)</li>\n<li><strong>BS_TOKEN_SECRET</strong>: Your BookStack API token secret</li>\n</ul>\n<h4 id=\"bkmrk-graphiti%2Fneo4j-setti\">Graphiti/Neo4j Settings</h4>\n<ul id=\"bkmrk-neo4j_uri%3A-the-uri-o\">\n<li><strong>NEO4J_URI</strong>: The URI of your Neo4j instance (e.g., <code>bolt://localhost:7687</code>)</li>\n<li><strong>NEO4J_USER</strong>: Your Neo4j username (default is <code>neo4j</code>)</li>\n<li><strong>NEO4J_PASSWORD</strong>: Your Neo4j password</li>\n<li><strong>OPENAI_API_KEY</strong>: Your OpenAI API key (used by Graphiti for embeddings)</li>\n<li><strong>GRAPHITI_ENDPOINT</strong>: The endpoint of your Graphiti API</li>\n</ul>\n<h4 id=\"bkmrk-webhook-receiver-set\">Webhook Receiver Settings</h4>\n<ul id=\"bkmrk-port%3A-the-port-on-wh\">\n<li><strong>PORT</strong>: The port on which the webhook receiver will listen (default is <code>8003</code>)</li>\n<li><strong>ENABLE_SYNC</strong>: Whether to run the initial data synchronization on startup (<code>true</code> or <code>false</code>)</li>\n</ul>\n<h2 id=\"bkmrk-obtaining-bookstack-\">Obtaining BookStack API Credentials</h2>\n<p id=\"bkmrk-to-obtain-the-requir\">To obtain the required BookStack API credentials:</p>\n<ol id=\"bkmrk-log-in-to-your-books\">\n<li>Log in to your BookStack instance as an administrator</li>\n<li>Go to <strong>Settings</strong> &gt; <strong>API</strong></li>\n<li>Click on <strong>Create Token</strong></li>\n<li>Enter a name for the token (e.g., \"Graphiti Integration\")</li>\n<li>Select the appropriate permissions (at minimum, you need read access to all entity types)</li>\n<li>Click <strong>Save</strong></li>\n<li>Copy the displayed <strong>Token ID</strong> and <strong>Token Secret</strong> to your <code>.env</code> file</li>\n</ol>\n<h2 id=\"bkmrk-running-the-integrat\">Running the Integration</h2>\n<h3 id=\"bkmrk-running-locally\">Running Locally</h3>\n<p id=\"bkmrk-to-run-the-webhook-r\">To run the webhook receiver locally:</p>\n<pre id=\"bkmrk-uvicorn-webhook_rece\"><code class=\"language-bash\">uvicorn webhook_receiver:app --host 0.0.0.0 --port 8003 --reload\n</code></pre>\n<p id=\"bkmrk-this-will-start-the-\">This will start the webhook receiver on port 8003 (or the port specified in your <code>.env</code> file).</p>\n<h3 id=\"bkmrk-initial-data-synchro\">Initial Data Synchronization</h3>\n<p id=\"bkmrk-to-perform-the-initi\">To perform the initial data synchronization manually:</p>\n<pre id=\"bkmrk-python-sync_bookstac\"><code class=\"language-bash\">python sync_bookstack_data.py\n</code></pre>\n<p id=\"bkmrk-this-will-fetch-all-\">This will fetch all existing bookshelves, books, chapters, and pages from your BookStack instance and add them to the Graphiti knowledge graph.</p>\n<h2 id=\"bkmrk-verifying-the-instal\">Verifying the Installation</h2>\n<p id=\"bkmrk-to-verify-that-the-i\">To verify that the installation is working correctly:</p>\n<ol id=\"bkmrk-check-the-logs-for-a\">\n<li>Check the logs for any errors during startup</li>\n<li>Access the health check endpoint at <code>http://&lt;your-server&gt;:8003/</code></li>\n<li>You should see a message indicating that the BookStack Webhook Receiver is running</li>\n</ol>\n<h2 id=\"bkmrk-next-steps\">Next Steps</h2>\n<p id=\"bkmrk-after-completing-the\">After completing the installation and configuration:</p>\n<ol id=\"bkmrk-configure-the-bookst\">\n<li>Configure the BookStack webhook (see the Webhook Configuration chapter)</li>\n<li>Test the integration by creating or updating content in BookStack</li>\n<li>Verify that the changes are reflected in the Graphiti knowledge graph</li>\n</ol>\n",
  "tags": [],
  "book": null,
  "chapter": null
}