{
  "id": 158,
  "title": "Database Models and Schema",
  "slug": "database-models-and-schema",
  "url": "https://knowledge.oculair.ca/page/158",
  "updated_at": "2025-09-08T16:41:37.000000Z",
  "body_html": "<h1 id=\"bkmrk-database-models-and-\">Database Models and Schema</h1>\n<h2 id=\"bkmrk-models\">Models</h2>\n<ul id=\"bkmrk-webhookconfig-%E2%80%93-conf\">\n<li><code>WebhookConfig</code> – configuration for a webhook endpoint</li>\n<li><code>WebhookEvent</code> – emission representing a deliverable event</li>\n<li><code>WebhookDeliveryAttempt</code> – per-attempt delivery log</li>\n</ul>\n<h2 id=\"bkmrk-key-fields\">Key Fields</h2>\n<ul id=\"bkmrk-config%3A-url%2C-events%5B\">\n<li>Config: <code>url</code>, <code>events[]</code>, <code>filters</code>, <code>secret</code>, <code>enabled</code>, <code>timeout</code>, <code>maxRetries</code></li>\n<li>Event: <code>eventType</code>, <code>objectId</code>, <code>objectClass</code>, <code>payload</code>, <code>status</code>, <code>attemptCount</code>, <code>nextRetry</code>, <code>deliveryId</code></li>\n<li>Attempt: <code>webhookEvent</code>, <code>attemptNumber</code>, <code>attemptedAt</code>, <code>responseStatus</code>, <code>duration</code>, <code>error</code>, <code>success</code></li>\n</ul>\n<h2 id=\"bkmrk-indices\">Indices</h2>\n<ul id=\"bkmrk-config%3A-space%2C-enabl\">\n<li>Config: <code>space, enabled</code></li>\n<li>Event: <code>status, nextRetry</code>, <code>webhookConfig, createdOn</code></li>\n<li>Attempt: <code>webhookEvent, attemptedAt</code></li>\n</ul>\n<h2 id=\"bkmrk-notes\">Notes</h2>\n<ul id=\"bkmrk-hide-secrets-from-st\">\n<li>Hide secrets from standard projections</li>\n<li>Maintain counters on config: deliveryCount, failureCount</li>\n</ul>\n<h2 id=\"bkmrk-model-relationships-\">Model Relationships (Diagram)</h2>\n<pre id=\"bkmrk-erdiagram-webhookcon\"><code class=\"language-mermaid\">erDiagram\n  WebhookConfig ||--o{ WebhookEvent : emits\n  WebhookEvent ||--o{ WebhookDeliveryAttempt : attempts\n  WebhookConfig {\n    string id\n    string space\n    string url\n    string[] events\n    string secret\n    bool enabled\n  }\n  WebhookEvent {\n    string id\n    string webhookConfig\n    string eventType\n    int attemptCount\n    datetime nextRetry\n    string status\n  }\n  WebhookDeliveryAttempt {\n    string id\n    string webhookEvent\n    int attemptNumber\n    int responseStatus\n    int durationMs\n    string error\n    bool success\n  }\n</code></pre>\n",
  "tags": [],
  "book": null,
  "chapter": null
}