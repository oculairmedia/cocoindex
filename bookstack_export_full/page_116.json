{
  "id": 116,
  "title": "Configuring BookStack Webhooks",
  "slug": "configuring-bookstack-webhooks",
  "url": "https://knowledge.oculair.ca/books/unknown/page/configuring-bookstack-webhooks",
  "updated_at": "2025-05-06T16:26:19.000000Z",
  "body_html": "<h1 id=\"bkmrk-configuring-bookstac\">Configuring BookStack Webhooks</h1>\n<h2 id=\"bkmrk-introduction-to-book\">Introduction to BookStack Webhooks</h2>\n<p id=\"bkmrk-webhooks-are-a-mecha\">Webhooks are a mechanism that allows BookStack to notify external systems (like our integration) when certain events occur. The BookStack-Graphiti integration relies on these webhooks to receive real-time notifications about changes to books, chapters, pages, and bookshelves.</p>\n<h2 id=\"bkmrk-prerequisites\">Prerequisites</h2>\n<p id=\"bkmrk-before-configuring-w\">Before configuring webhooks, ensure that:</p>\n<ol id=\"bkmrk-the-bookstack-graphi\">\n<li>The BookStack-Graphiti integration is installed and running</li>\n<li>You have administrative access to your BookStack instance</li>\n<li>The webhook receiver is accessible from your BookStack server</li>\n</ol>\n<h2 id=\"bkmrk-webhook-configuratio\">Webhook Configuration in BookStack</h2>\n<h3 id=\"bkmrk-accessing-the-webhoo\">Accessing the Webhook Settings</h3>\n<ol id=\"bkmrk-log-in-to-your-books\">\n<li>Log in to your BookStack instance as an administrator</li>\n<li>Navigate to <strong>Settings</strong> in the main menu</li>\n<li>Select the <strong>Webhooks</strong> tab</li>\n</ol>\n<h3 id=\"bkmrk-creating-a-new-webho\">Creating a New Webhook</h3>\n<ol id=\"bkmrk-click-the-create-new\">\n<li>\n<p>Click the <strong>Create New Webhook</strong> button</p>\n</li>\n<li>\n<p>Fill in the following details:</p>\n<ul>\n<li><strong>Name</strong>: Enter a descriptive name (e.g., \"Graphiti Integration\")</li>\n<li><strong>URL</strong>: Enter the URL of your webhook receiver (e.g., <code>http://your-server:8003</code>)</li>\n<li><strong>Events</strong>: Select the events you want to trigger the webhook (recommended: all events)</li>\n</ul>\n</li>\n<li>\n<p>Click <strong>Save</strong> to create the webhook</p>\n</li>\n</ol>\n<h3 id=\"bkmrk-event-selection\">Event Selection</h3>\n<p id=\"bkmrk-bookstack-offers-sev\">BookStack offers several event types that can trigger webhooks. For the Graphiti integration, we recommend enabling the following events:</p>\n<h4 id=\"bkmrk-page-events\">Page Events</h4>\n<ul id=\"bkmrk-page-create%3A-trigger\">\n<li><strong>Page Create</strong>: Triggered when a new page is created</li>\n<li><strong>Page Update</strong>: Triggered when a page is updated</li>\n<li><strong>Page Delete</strong>: Triggered when a page is deleted</li>\n</ul>\n<h4 id=\"bkmrk-chapter-events\">Chapter Events</h4>\n<ul id=\"bkmrk-chapter-create%3A-trig\">\n<li><strong>Chapter Create</strong>: Triggered when a new chapter is created</li>\n<li><strong>Chapter Update</strong>: Triggered when a chapter is updated</li>\n<li><strong>Chapter Delete</strong>: Triggered when a chapter is deleted</li>\n</ul>\n<h4 id=\"bkmrk-book-events\">Book Events</h4>\n<ul id=\"bkmrk-book-create%3A-trigger\">\n<li><strong>Book Create</strong>: Triggered when a new book is created</li>\n<li><strong>Book Update</strong>: Triggered when a book is updated</li>\n<li><strong>Book Delete</strong>: Triggered when a book is deleted</li>\n</ul>\n<h4 id=\"bkmrk-bookshelf-events\">Bookshelf Events</h4>\n<ul id=\"bkmrk-bookshelf-create%3A-tr\">\n<li><strong>Bookshelf Create</strong>: Triggered when a new bookshelf is created</li>\n<li><strong>Bookshelf Update</strong>: Triggered when a bookshelf is updated</li>\n<li><strong>Bookshelf Delete</strong>: Triggered when a bookshelf is deleted</li>\n</ul>\n<h3 id=\"bkmrk-advanced-webhook-opt\">Advanced Webhook Options</h3>\n<p id=\"bkmrk-bookstack-provides-a\">BookStack provides additional options for webhook configuration:</p>\n<ul id=\"bkmrk-active%3A-toggle-to-en\">\n<li><strong>Active</strong>: Toggle to enable/disable the webhook without deleting it</li>\n<li><strong>Timeout</strong>: Set the maximum time BookStack will wait for a response (default: 3 seconds)</li>\n<li><strong>Retry Count</strong>: Number of times BookStack will retry if the webhook fails (default: 0)</li>\n</ul>\n<h2 id=\"bkmrk-webhook-payload-stru\">Webhook Payload Structure</h2>\n<p id=\"bkmrk-when-an-event-occurs\">When an event occurs, BookStack sends a JSON payload to the webhook URL. The payload structure varies depending on the event type, but generally includes:</p>\n<pre id=\"bkmrk-%7B-%22event%22%3A-%22page.upd\"><code class=\"language-json\">{\n  \"event\": \"page.update\",\n  \"url\": \"https://bookstack.example.com/books/1/page/1\",\n  \"related_item\": {\n    \"id\": 1,\n    \"name\": \"API Documentation\",\n    \"slug\": \"api-documentation\",\n    \"book_id\": 1,\n    \"chapter_id\": 2,\n    \"draft\": false,\n    \"template\": false,\n    \"created_by\": 1,\n    \"updated_by\": 1,\n    \"created_at\": \"2024-01-15T10:00:00Z\",\n    \"updated_at\": \"2024-01-15T10:00:00Z\"\n  },\n  \"user\": {\n    \"id\": 1,\n    \"name\": \"Admin User\",\n    \"slug\": \"admin-user\"\n  },\n  \"ip\": \"192.168.1.1\",\n  \"type\": \"page_update\",\n  \"webhook_id\": 1\n}\n</code></pre>\n<p id=\"bkmrk-the-webhook-receiver\">The webhook receiver in our integration is designed to handle all these payload formats and extract the relevant information.</p>\n<h2 id=\"bkmrk-testing-the-webhook-\">Testing the Webhook Configuration</h2>\n<p id=\"bkmrk-after-setting-up-the\">After setting up the webhook, you can test it to ensure it's working correctly:</p>\n<ol id=\"bkmrk-make-a-small-change-\">\n<li>Make a small change to a page in BookStack (e.g., add a space or a period)</li>\n<li>Save the page</li>\n<li>Check the logs of your webhook receiver to see if the event was received and processed</li>\n</ol>\n<p id=\"bkmrk-alternatively%2C-you-c\">Alternatively, you can use the included test script:</p>\n<pre id=\"bkmrk-python-test_bookstac\"><code class=\"language-bash\">python test_bookstack_webhook.py\n</code></pre>\n<p id=\"bkmrk-this-script-sends-sa\">This script sends sample webhook payloads to your webhook receiver, simulating events from BookStack.</p>\n<h2 id=\"bkmrk-troubleshooting-webh\">Troubleshooting Webhook Issues</h2>\n<h3 id=\"bkmrk-common-issues\">Common Issues</h3>\n<ol id=\"bkmrk-webhook-not-triggeri\">\n<li>\n<p><strong>Webhook Not Triggering</strong>:</p>\n<ul>\n<li>Verify that the webhook is enabled in BookStack</li>\n<li>Check that the selected events match the actions you're performing</li>\n<li>Ensure your BookStack instance can reach the webhook receiver URL</li>\n</ul>\n</li>\n<li>\n<p><strong>Connection Errors</strong>:</p>\n<ul>\n<li>Check if the webhook receiver is running</li>\n<li>Verify that the URL is correct and accessible from the BookStack server</li>\n<li>Check for any firewalls or network restrictions</li>\n</ul>\n</li>\n<li>\n<p><strong>Timeout Errors</strong>:</p>\n<ul>\n<li>Increase the timeout value in the webhook configuration</li>\n<li>Optimize the webhook receiver to respond more quickly</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"bkmrk-viewing-webhook-logs\">Viewing Webhook Logs in BookStack</h3>\n<p id=\"bkmrk-bookstack-maintains-\">BookStack maintains a log of webhook deliveries, which can be helpful for troubleshooting:</p>\n<ol id=\"bkmrk-go-to-settings-%3E-web\">\n<li>Go to <strong>Settings</strong> &gt; <strong>Webhooks</strong></li>\n<li>Click on the webhook name</li>\n<li>Scroll down to the <strong>Recent Deliveries</strong> section</li>\n<li>Click on a delivery to view details, including:\n<ul>\n<li>Request payload</li>\n<li>Response status</li>\n<li>Error messages (if any)</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"bkmrk-webhook-receiver-log\">Webhook Receiver Logs</h3>\n<p id=\"bkmrk-the-webhook-receiver-1\">The webhook receiver also logs information about received webhooks. Check these logs for any errors or issues:</p>\n<pre id=\"bkmrk-docker-compose-logs-\"><code class=\"language-bash\">docker-compose logs -f\n</code></pre>\n<p id=\"bkmrk-or%2C-if-running-local\">Or, if running locally:</p>\n<pre id=\"bkmrk-tail--f-webhook_rece\"><code class=\"language-bash\">tail -f webhook_receiver.log\n</code></pre>\n<h2 id=\"bkmrk-security-considerati\">Security Considerations</h2>\n<h3 id=\"bkmrk-https\">HTTPS</h3>\n<p id=\"bkmrk-for-production-envir\">For production environments, we strongly recommend using HTTPS for webhook communication. This ensures that the data transmitted between BookStack and the webhook receiver is encrypted.</p>\n<h3 id=\"bkmrk-ip-restrictions\">IP Restrictions</h3>\n<p id=\"bkmrk-consider-restricting\">Consider restricting access to the webhook receiver to only allow connections from your BookStack server's IP address.</p>\n<h3 id=\"bkmrk-authentication\">Authentication</h3>\n<p id=\"bkmrk-bookstack-does-not-c\">BookStack does not currently provide built-in authentication for webhooks. If additional security is required, consider implementing a reverse proxy with authentication or using a shared secret in the webhook URL.</p>\n<h2 id=\"bkmrk-next-steps\">Next Steps</h2>\n<p id=\"bkmrk-after-configuring-we\">After configuring webhooks, you should:</p>\n<ol id=\"bkmrk-test-the-integration\">\n<li>Test the integration by creating, updating, and deleting content in BookStack</li>\n<li>Verify that the changes are reflected in the Graphiti knowledge graph</li>\n<li>Set up monitoring for the webhook receiver to ensure it remains operational</li>\n</ol>\n",
  "tags": [],
  "book": "Unknown",
  "chapter": ""
}